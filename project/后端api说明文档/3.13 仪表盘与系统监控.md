
# **鸿庆书云创新协作平台后端API文档 - 3.13 仪表盘与系统监控**

## **目录**

13. **仪表盘与系统监控**
 * 3.13.1 `GET /dashboard/overall-stats` 获取平台整体统计数据
 * 3.13.2 `GET /admin/system-health` 【管理员专用】获取系统健康检查状态

---

## **公共基础模型**

### `schemas.DashboardStatsResponse` (用于平台整体统计响应)

* `total_users` (int): 平台注册用户总数。
* `total_projects` (int): 平台项目总数。
* `active_projects` (int): 当前进行中的项目数量。
* `completed_projects` (int): 已完成的项目数量。
* `total_courses` (int): 平台课程总数。
* `active_courses` (int): 当前活跃的课程数量（例如，有用户在学习）。
* `current_chat_rooms` (int): 当前存在的聊天室数量。
* `total_daily_records` (int): 随手记录总数。
* `total_notes` (int): 笔记总数。
* `total_knowledge_articles` (int): 知识文章总数。
* `average_points_per_user` (float): 每个用户的平均积分。
* `top_skill_area` (Optional[str]): 平台用户的热门技能领域。

### `schemas.SystemHealthResponse` (用于系统健康状态响应)

* `db_status` (Literal["ok", "error"]): 数据库连接状态。
* `db_message` (str): 数据库状态详情。
* `llm_service_status` (Literal["ok", "error", "skipped"]): 用户配置的LLM服务可用性状态（系统对默认用户的检查结果）。
* `llm_service_message` (str): LLM服务状态详情。
* `embedding_service_status` (Literal["ok", "error", "skipped"]): 用户配置的嵌入服务可用性状态。
* `embedding_service_message` (str): 嵌入服务状态详情。
* `reranker_service_status` (Literal["ok", "error", "skipped"]): 用户配置的重排服务可用性状态。
* `reranker_service_message` (str): 重排服务状态详情。
* `file_storage_status` (Literal["ok", "error"]): 文件存储目录可写状态。
* `file_storage_message` (str): 文件存储状态详情。
* `timestamp` (datetime): 健康检查执行时间。

---

## **3.13 仪表盘与系统监控**

### **3.13.1 `GET /dashboard/overall-stats` 获取平台整体统计数据**

* **摘要**: 获取平台整体的用户、项目、课程、聊天室、记录等各项主要数据的汇总统计。
* **权限**: 已认证用户。
* **请求体**: 无。
* **响应体**: `schemas.DashboardStatsResponse`
* **常见状态码**: `200 OK` (成功获取), `401 Unauthorized` (未认证), `500 Internal Server Error` (数据计算错误)

### **3.13.2 `GET /admin/system-health` 【管理员专用】获取系统健康检查状态**

* **摘要**: 对数据库、AI服务（LLM、嵌入、重排）、文件存储等核心组件执行健康检查，返回详细的状态报告。
* **权限**: 系统管理员。
* **请求体**: 无。
* **响应体**: `schemas.SystemHealthResponse`
* **常见状态码**: `200 OK` (成功获取状态报告), `401 Unauthorized` (未认证), `403 Forbidden` (非管理员)

---
