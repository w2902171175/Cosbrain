# ğŸ“ é¸¿åº†ä¹¦äº‘åˆ›æ–°åä½œå¹³å° (Cosbrain)

<div align="center">

![Logo](https://img.shields.io/badge/ğŸ“-é¸¿åº†ä¹¦äº‘-blue?style=for-the-badge)

**äº‘èšä¹¦ï¼Œä¹¦è½½é¸¿ï¼Œé¸¿æˆåº†**

*åŸºäºAIæŠ€æœ¯çš„ç°ä»£åŒ–æ™ºæ…§æ•™è‚²åä½œå¹³å°*


[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg?style=flat-square)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.111+-green.svg?style=flat-square)](https://fastapi.tiangolo.com)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14+-blue.svg?style=flat-square)](https://postgresql.org)
[![pgvector](https://img.shields.io/badge/pgvector-0.2+-purple.svg?style=flat-square)](https://github.com/pgvector/pgvector)
[![License](https://img.shields.io/badge/License-Custom-yellow.svg?style=flat-square)](LICENSE)

[![GitHub last commit](https://img.shields.io/github/last-commit/w2902171175/Cosbrain?style=flat-square)](https://github.com/w2902171175/Cosbrain)
[![GitHub code size](https://img.shields.io/github/languages/code-size/w2902171175/Cosbrain?style=flat-square)](https://github.com/w2902171175/Cosbrain)
[![Lines of code](https://img.shields.io/tokei/lines/github/w2902171175/Cosbrain?style=flat-square)](https://github.com/w2902171175/Cosbrain)

[åŠŸèƒ½ç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [APIæ–‡æ¡£](#-api-æ–‡æ¡£) â€¢ [éƒ¨ç½²æŒ‡å—](#-ç”Ÿäº§éƒ¨ç½²) â€¢ [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

**é¸¿åº†ä¹¦äº‘åˆ›æ–°åä½œå¹³å° (Cosbrain)** æ˜¯ä¸€ä¸ªé¢å‘ç°ä»£æ•™è‚²çš„æ™ºèƒ½åŒ–åä½œå¹³å°ï¼Œè‡´åŠ›äºä¸ºå­¦ç”Ÿã€æ•™å¸ˆå’Œç ”ç©¶è€…æ„å»ºä¸€ä¸ªé«˜æ•ˆã€æ™ºèƒ½ã€åä½œçš„å­¦ä¹ ç”Ÿæ€ç³»ç»Ÿã€‚

### ğŸ¯ é¡¹ç›®æ„¿æ™¯

> **"è®©æ¯ä¸€ä¸ªå­¦ä¹ è€…éƒ½èƒ½åœ¨æ™ºèƒ½åŒ–çš„ç¯å¢ƒä¸­ï¼Œæ‰¾åˆ°æœ€é€‚åˆçš„å­¦ä¹ ä¼™ä¼´ã€æœ€ä¼˜è´¨çš„å­¦ä¹ èµ„æºï¼Œå®ç°ä¸ªæ€§åŒ–çš„å­¦ä¹ æˆé•¿"**

### ğŸŒŸ å¹³å°æ ¸å¿ƒä»·å€¼

- **ğŸ¤– AIé©±åŠ¨**: åŸºäºå…ˆè¿›çš„å‘é‡åµŒå…¥æŠ€æœ¯å’Œå¤§è¯­è¨€æ¨¡å‹ï¼Œæä¾›æ™ºèƒ½åŒ¹é…ã€è¯­ä¹‰æœç´¢å’Œä¸ªæ€§åŒ–æ¨è
- **ğŸ“š çŸ¥è¯†ä¸­å¿ƒ**: æ„å»ºç»“æ„åŒ–çš„çŸ¥è¯†ç®¡ç†ä½“ç³»ï¼Œæ”¯æŒå¤šæ ¼å¼æ–‡æ¡£è§£æå’Œæ™ºèƒ½æ£€ç´¢
- **ğŸ¤ åä½œä¼˜å…ˆ**: å®æ—¶èŠå¤©ã€é¡¹ç›®åä½œã€å­¦ä¹ å°ç»„ç­‰å¤šç»´åº¦çš„åä½œæ”¯æŒ
- **ğŸ“ æ•™è‚²ä¸“æ³¨**: ä¸“ä¸ºæ•™è‚²åœºæ™¯è®¾è®¡çš„åŠŸèƒ½æ¨¡å—ï¼Œä»è¯¾ç¨‹ç®¡ç†åˆ°å­¦ä¹ è¯„ä¼°çš„å…¨æµç¨‹è¦†ç›–
- **ğŸ”§ é«˜åº¦å®šåˆ¶**: çµæ´»çš„é…ç½®ç³»ç»Ÿï¼Œæ”¯æŒä¸ªæ€§åŒ–çš„AIæ¨¡å‹ã€æœç´¢å¼•æ“å’ŒæœåŠ¡é›†æˆ

### ğŸ“Š å¹³å°è§„æ¨¡

- **ğŸ—ƒï¸ æ•°æ®æ¨¡å‹**: 29ä¸ªæ ¸å¿ƒæ•°æ®è¡¨ï¼Œè¦†ç›–ç”¨æˆ·ã€é¡¹ç›®ã€çŸ¥è¯†ã€è¯¾ç¨‹ã€ç¤¾äº¤ç­‰å…¨ä¸šåŠ¡åŸŸ
- **ğŸ”— APIæ¥å£**: 12,000+ è¡Œä»£ç å®ç°çš„RESTful APIï¼Œæ”¯æŒå®Œæ•´çš„ä¸šåŠ¡åŠŸèƒ½
- **ğŸ§  AIé›†æˆ**: æ”¯æŒOpenAI GPTã€Sentence Transformersç­‰å¤šç§AIæ¨¡å‹
- **ğŸ“ æ–‡ä»¶æ”¯æŒ**: Wordã€PDFã€Excelã€PPTç­‰å¤šæ ¼å¼æ–‡æ¡£çš„æ™ºèƒ½è§£æ

## âœ¨ æ ¸å¿ƒç‰¹æ€§

<table>
<tr>
<td width="50%">

### ğŸ¤– AIæ™ºèƒ½å¼•æ“
- **ğŸ¯ æ™ºèƒ½åŒ¹é…ç®—æ³•**: åŸºäºpgvectorå‘é‡æ•°æ®åº“ï¼Œä½¿ç”¨sentence-transformersæ¨¡å‹è¿›è¡Œè¯­ä¹‰åˆ†æï¼Œå®ç°å­¦ç”Ÿ-é¡¹ç›®-è¯¾ç¨‹çš„ç²¾å‡†åŒ¹é…
- **ğŸ§  å¤šæ¨¡å‹é›†æˆ**: æ”¯æŒOpenAI GPT-3.5/4ã€æœ¬åœ°Transformeræ¨¡å‹ç­‰ï¼Œæä¾›çµæ´»çš„AIæœåŠ¡åˆ‡æ¢
- **ğŸ“„ æ™ºèƒ½æ–‡æ¡£è§£æ**: è‡ªåŠ¨è§£æWordã€PDFã€Excelã€PPTç­‰æ ¼å¼ï¼Œæå–ç»“æ„åŒ–ä¿¡æ¯å¹¶å‘é‡åŒ–å­˜å‚¨
- **ğŸ” å‘é‡åŒ–æœç´¢**: åŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦çš„é«˜ç²¾åº¦æœç´¢ï¼Œæ”¯æŒè·¨è¯­è¨€å’Œæ¨¡ç³ŠåŒ¹é…
- **ğŸ’¬ AIå¯¹è¯åŠ©æ‰‹**: é›†æˆå¤šç§LLMæ¨¡å‹ï¼Œæ”¯æŒRAGæ£€ç´¢å¢å¼ºç”Ÿæˆï¼Œæä¾›ä¸“ä¸šçš„å­¦æœ¯å¯¹è¯

### ğŸ“š çŸ¥è¯†ç®¡ç†ç³»ç»Ÿ
- **ğŸ—ï¸ åˆ†å±‚æ¶æ„**: çŸ¥è¯†åº“â†’æ–‡ä»¶å¤¹â†’æ–‡ç« çš„ä¸‰çº§ç®¡ç†ç»“æ„ï¼Œæ”¯æŒæ— é™å±‚çº§åµŒå¥—
- **âš¡ æ™ºèƒ½å¤„ç†**: æ–‡æ¡£è‡ªåŠ¨åˆ†å—ã€å‘é‡åŒ–å­˜å‚¨ã€å…ƒæ•°æ®æå–ï¼Œæ”¯æŒRAGæ£€ç´¢
- **ğŸ“ æ ¼å¼æ”¯æŒ**: Word(.docx)ã€PDFã€Excel(.xlsx)ã€PowerPoint(.pptx)çš„å®Œæ•´è§£æ
- **ğŸ§­ çŸ¥è¯†å›¾è°±**: åŸºäºå†…å®¹ç›¸ä¼¼æ€§æ„å»ºçŸ¥è¯†å…³è”ç½‘ç»œï¼Œæ™ºèƒ½æ¨èç›¸å…³å†…å®¹
- **â­ æ”¶è—ç³»ç»Ÿ**: ä¸ªäººæ”¶è—å¤¹ï¼Œæ”¯æŒåˆ†ç±»æ ‡ç­¾å’Œæ‰¹é‡ç®¡ç†

### ğŸ’¬ å®æ—¶åä½œç³»ç»Ÿ
- **âš¡ WebSocketé€šä¿¡**: ä½å»¶è¿Ÿå®æ—¶æ¶ˆæ¯ä¼ è¾“ï¼Œæ”¯æŒåœ¨çº¿çŠ¶æ€åŒæ­¥
- **ğŸ‘¥ å¤šäººèŠå¤©å®¤**: é¡¹ç›®ç»„ã€å­¦ä¹ å°ç»„ã€ä¸´æ—¶è®¨è®ºç»„ç­‰å¤šåœºæ™¯åä½œæ”¯æŒ
- **ğŸ” æƒé™ç®¡ç†**: å®Œæ•´çš„èŠå¤©å®¤æˆå‘˜ç®¡ç†ã€åŠ å…¥ç”³è¯·å’Œæƒé™æ§åˆ¶
- **ğŸ“ æ–‡ä»¶å…±äº«**: èŠå¤©ä¸­çš„æ–‡ä»¶ä¸Šä¼ ã€äº‘å­˜å‚¨é›†æˆå’Œç‰ˆæœ¬ç®¡ç†
- **ğŸŸ¢ åœ¨çº¿çŠ¶æ€**: å®æ—¶æ˜¾ç¤ºç”¨æˆ·åœ¨çº¿çŠ¶æ€ã€æ´»è·ƒåº¦å’Œæœ€åæ´»åŠ¨æ—¶é—´

</td>
<td width="50%">

### ğŸ¯ å­¦ä¹ ç®¡ç†
- **ğŸ“– è¯¾ç¨‹ä½“ç³»**: å®Œæ•´çš„è¯¾ç¨‹åˆ›å»ºã€å‘å¸ƒã€å­¦ä¹ è¿›åº¦è·Ÿè¸ªå’Œæˆç»©ç®¡ç†
- **ğŸ“š ææ–™ç®¡ç†**: è¯¾ç¨‹èµ„æ–™ä¸Šä¼ ä¸‹è½½ã€ç‰ˆæœ¬æ§åˆ¶å’Œæƒé™ç®¡ç†
- **ğŸ“Š å­¦ä¹ åˆ†æ**: è¯¦ç»†çš„å­¦ä¹ è½¨è¿¹ã€æ—¶é—´ç»Ÿè®¡å’Œæˆç»©å¯è§†åŒ–åˆ†æ
- **ğŸ·ï¸ æŠ€èƒ½æ ‡ç­¾**: åŸºäºæŠ€èƒ½æ ‘çš„è¯¾ç¨‹æ¨èå’Œä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„è§„åˆ’
- **â­ äº’åŠ¨è¯„ä»·**: è¯¾ç¨‹è¯„åˆ†ã€è¯„è®ºåé¦ˆå’Œå­¦ä¹ å¿ƒå¾—åˆ†äº«

### ğŸŒ ç¤¾åŒºè®ºå›
- **âœï¸ è¯é¢˜å‘å¸ƒ**: æ”¯æŒå¯Œæ–‡æœ¬ç¼–è¾‘ã€å›¾ç‰‡æ’å…¥ã€é™„ä»¶ä¸Šä¼ çš„è¯é¢˜å‘å¸ƒ
- **ğŸ’¬ å¤šçº§è¯„è®º**: æ”¯æŒæ— é™å±‚çº§çš„åµŒå¥—å›å¤å’Œè®¨è®ºä¸²
- **â¤ï¸ ç¤¾äº¤äº’åŠ¨**: ç‚¹èµã€å…³æ³¨ã€ç²‰ä¸ç³»ç»Ÿï¼Œæ„å»ºå­¦ä¹ ç¤¾äº¤ç½‘ç»œ
- **ğŸ” å†…å®¹ç®¡ç†**: è¯é¢˜åˆ†ç±»ã€æ ‡ç­¾ç³»ç»Ÿå’Œé«˜çº§æœç´¢åŠŸèƒ½

### ğŸ† æ¿€åŠ±ç³»ç»Ÿ
- **ğŸ’° ç§¯åˆ†æœºåˆ¶**: å¤šç»´åº¦ç§¯åˆ†è·å–ï¼ˆå­¦ä¹ ã€åˆ†äº«ã€åä½œï¼‰å’Œæ¶ˆè´¹ç³»ç»Ÿ
- **ğŸ¥‡ æˆå°±ç³»ç»Ÿ**: ä¸°å¯Œçš„æˆå°±æŒ‘æˆ˜ã€å¾½ç« æ”¶é›†å’Œå¥–åŠ±æœºåˆ¶
- **ğŸ“ˆ æ’è¡Œæ¦œ**: å­¦ä¹ ç§¯åˆ†ã€æ´»è·ƒåº¦ã€è´¡çŒ®åº¦ç­‰å¤šç»´åº¦æ’å
- **ğŸ“… æ¯æ—¥ä»»åŠ¡**: ç­¾åˆ°æ‰“å¡ã€å­¦ä¹ ç›®æ ‡ã€ä¹ æƒ¯å…»æˆçš„ä»»åŠ¡ç³»ç»Ÿ

### âš™ï¸ ä¸ªæ€§åŒ–é…ç½®
- **ğŸ”§ å¤šæ¨¡å‹é…ç½®**: LLMã€TTSã€æœç´¢å¼•æ“çš„ä¸ªæ€§åŒ–é…ç½®å’ŒAPIç®¡ç†
- **ğŸ”Œ MCPåè®®**: æ”¯æŒModel Context Protocolæ ‡å‡†ï¼Œæ‰©å±•AIæ¨¡å‹èƒ½åŠ›
- **ğŸ”‘ å®‰å…¨ç®¡ç†**: APIå¯†é’¥çš„åŠ å¯†å­˜å‚¨ã€æƒé™æ§åˆ¶å’Œä½¿ç”¨ç›‘æ§
- **ğŸ›ï¸ åå¥½è®¾ç½®**: ä¸ªäººå­¦ä¹ åå¥½ã€æ¨èç®—æ³•å‚æ•°å’Œç•Œé¢å®šåˆ¶

</td>
</tr>
</table>

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### ğŸ—ï¸ æ•´ä½“æ¶æ„å›¾

```mermaid
graph TB
    subgraph "å‰ç«¯å±‚"
        FE[Webå‰ç«¯] --> API[FastAPIåç«¯]
        MOB[ç§»åŠ¨ç«¯] --> API
    end
    
    subgraph "åº”ç”¨å±‚"
        API --> AUTH[è®¤è¯ä¸­å¿ƒ]
        API --> BIZ[ä¸šåŠ¡é€»è¾‘å±‚]
        BIZ --> MATCH[æ™ºèƒ½åŒ¹é…]
        BIZ --> KNOW[çŸ¥è¯†ç®¡ç†]
        BIZ --> CHAT[å®æ—¶é€šä¿¡]
        BIZ --> COURSE[è¯¾ç¨‹ç®¡ç†]
    end
    
    subgraph "AIæœåŠ¡å±‚"
        MATCH --> AI[AIæ ¸å¿ƒå¼•æ“]
        KNOW --> AI
        AI --> LLM[å¤§è¯­è¨€æ¨¡å‹]
        AI --> EMB[åµŒå…¥æ¨¡å‹]
        AI --> SEARCH[æœç´¢å¼•æ“]
    end
    
    subgraph "æ•°æ®å±‚"
        BIZ --> ORM[SQLAlchemy ORM]
        ORM --> PG[(PostgreSQL)]
        PG --> VECTOR[pgvectoræ‰©å±•]
        API --> STORAGE[å¯¹è±¡å­˜å‚¨]
    end
```

### ï¿½ åç«¯æŠ€æœ¯æ ˆ

<table>
<tr>
<td width="25%"><b>ğŸŒ Webæ¡†æ¶</b></td>
<td width="75%">

```python
FastAPI 0.111.0          # ç°ä»£å¼‚æ­¥Webæ¡†æ¶ï¼Œè‡ªåŠ¨ç”ŸæˆOpenAPIæ–‡æ¡£
Uvicorn                  # é«˜æ€§èƒ½ASGIæœåŠ¡å™¨
Python-multipart        # æ–‡ä»¶ä¸Šä¼ å’Œè¡¨å•å¤„ç†æ”¯æŒ
```

</td>
</tr>
<tr>
<td><b>ï¿½ï¸ æ•°æ®åº“å±‚</b></td>
<td>

```python
PostgreSQL 14+          # ä¸»æ•°æ®åº“ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢å’Œäº‹åŠ¡
pgvector 0.2+           # å‘é‡æ•°æ®åº“æ‰©å±•ï¼Œæ”¯æŒAIåµŒå…¥æœç´¢
SQLAlchemy 2.0.32       # ç°ä»£åŒ–ORMï¼Œæ”¯æŒå¼‚æ­¥å’Œç±»å‹æç¤º
Alembic 1.13.2          # æ•°æ®åº“ç‰ˆæœ¬ç®¡ç†å’Œè¿ç§»å·¥å…·
```

</td>
</tr>
<tr>
<td><b>ğŸ¤– AI/MLå¼•æ“</b></td>
<td>

```python
Sentence-Transformers   # æ–‡æœ¬è¯­ä¹‰åµŒå…¥å’Œç›¸ä¼¼åº¦è®¡ç®—
Transformers 4.38.2     # HuggingFaceæ¨¡å‹åº“ï¼Œæ”¯æŒå¤šç§é¢„è®­ç»ƒæ¨¡å‹
Scikit-learn 1.5.0      # ç»å…¸æœºå™¨å­¦ä¹ ç®—æ³•åº“
PyTorch 2.2.1           # æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œæ¨¡å‹è®­ç»ƒå’Œæ¨ç†
OpenAI 1.12.0           # GPT APIé›†æˆï¼Œæ”¯æŒæœ€æ–°æ¨¡å‹
```

</td>
</tr>
<tr>
<td><b>ï¿½ è®¤è¯å®‰å…¨</b></td>
<td>

```python
PassLib + BCrypt        # å¯†ç å®‰å…¨å“ˆå¸Œå’ŒéªŒè¯
Python-JOSE             # JWTä»¤ç‰Œç”Ÿæˆå’ŒéªŒè¯
Cryptography            # é«˜çº§åŠ å¯†ç®—æ³•æ”¯æŒ
```

</td>
</tr>
<tr>
<td><b>ï¿½ æ–‡ä»¶å¤„ç†</b></td>
<td>

```python
python-docx             # Wordæ–‡æ¡£(.docx)è§£æå’Œç”Ÿæˆ
PyPDF2                  # PDFæ–‡æ¡£å†…å®¹æå–
openpyxl                # Excelæ–‡ä»¶(.xlsx)æ“ä½œ
python-pptx             # PowerPoint(.pptx)å¤„ç†
```

</td>
</tr>
<tr>
<td><b>â˜ï¸ äº‘æœåŠ¡é›†æˆ</b></td>
<td>

```python
HTTPX                   # ç°ä»£å¼‚æ­¥HTTPå®¢æˆ·ç«¯
gTTS                    # Googleæ–‡æœ¬è½¬è¯­éŸ³æœåŠ¡
Boto3é£æ ¼API            # S3å…¼å®¹å¯¹è±¡å­˜å‚¨æ¥å£
```

</td>
</tr>
</table>

### ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

å¹³å°é‡‡ç”¨PostgreSQLä½œä¸ºä¸»æ•°æ®åº“ï¼Œé›†æˆpgvectoræ‰©å±•æ”¯æŒå‘é‡å­˜å‚¨å’Œè¯­ä¹‰æœç´¢ã€‚æ•°æ®åº“è®¾è®¡éµå¾ªæ ‡å‡†åŒ–åŸåˆ™ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§å’ŒæŸ¥è¯¢æ€§èƒ½ã€‚

#### ğŸ” æ€§èƒ½ä¼˜åŒ–

- **ç´¢å¼•ç­–ç•¥**: ä¸ºé«˜é¢‘æŸ¥è¯¢å­—æ®µå»ºç«‹å¤åˆç´¢å¼•ï¼Œä¼˜åŒ–å…³è”æŸ¥è¯¢æ€§èƒ½
- **å‘é‡ç´¢å¼•**: pgvectoræ‰©å±•çš„HNSWç´¢å¼•ï¼Œæ”¯æŒé«˜æ•ˆçš„ç›¸ä¼¼åº¦æœç´¢
- **åˆ†åŒºè¡¨**: å¯¹å¤§æ•°æ®é‡è¡¨ï¼ˆå¦‚æ¶ˆæ¯ã€æ—¥å¿—ï¼‰è¿›è¡Œæ—¶é—´åˆ†åŒº
- **è¿æ¥æ± **: SQLAlchemyè¿æ¥æ± é…ç½®ï¼Œæ”¯æŒé«˜å¹¶å‘è®¿é—®

### ğŸ”Œ APIæ¶æ„

åŸºäºFastAPIçš„ç°ä»£åŒ–RESTful APIè®¾è®¡ï¼Œå…·æœ‰è‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆã€ç±»å‹éªŒè¯å’Œå¼‚æ­¥å¤„ç†èƒ½åŠ›ã€‚

#### ğŸ”§ APIç‰¹æ€§

- **ğŸ“– è‡ªåŠ¨æ–‡æ¡£**: OpenAPI 3.0æ ‡å‡†ï¼Œå®æ—¶ç”ŸæˆAPIæ–‡æ¡£
- **âœ… æ•°æ®éªŒè¯**: Pydanticæ¨¡å‹è‡ªåŠ¨éªŒè¯è¯·æ±‚å‚æ•°
- **âš¡ å¼‚æ­¥å¤„ç†**: å…¨å¼‚æ­¥æ¶æ„ï¼Œæ”¯æŒé«˜å¹¶å‘è¯·æ±‚
- **ğŸ”’ å®‰å…¨æœºåˆ¶**: JWTè®¤è¯ã€CORSé…ç½®ã€è¯·æ±‚é™æµ
- **ğŸ“Š ç›‘æ§æ—¥å¿—**: è¯·æ±‚è¿½è¸ªã€æ€§èƒ½ç›‘æ§ã€é”™è¯¯æŠ¥å‘Š

#### ï¿½ API æ–‡æ¡£

å¹³å°æä¾›å®Œæ•´çš„RESTful APIæ¥å£ï¼Œæ”¯æŒè‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆå’Œäº¤äº’å¼æµ‹è¯•ã€‚

##### ğŸ”— æ–‡æ¡£è®¿é—®

| æ–‡æ¡£ç±»å‹ | è®¿é—®åœ°å€ | ç‰¹ç‚¹ |
|----------|----------|------|
| **Swagger UI** | http://localhost:8000/docs | äº¤äº’å¼APIæµ‹è¯•ï¼Œæ”¯æŒåœ¨çº¿è°ƒç”¨ |
| **ReDoc** | http://localhost:8000/redoc | ç¾è§‚çš„æ–‡æ¡£å±•ç¤ºï¼Œé€‚åˆé˜…è¯» |
| **OpenAPI JSON** | http://localhost:8000/openapi.json | æœºå™¨å¯è¯»çš„APIè§„èŒƒ |

##### ğŸš€ API æ¨¡å—æ¦‚è§ˆ

<details>
<summary><b>ğŸ” è®¤è¯æˆæƒ API</b></summary>

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| `POST` | `/token` | ç”¨æˆ·ç™»å½•ï¼Œè·å–JWTè®¿é—®ä»¤ç‰Œ |
| `POST` | `/register` | ç”¨æˆ·æ³¨å†Œï¼Œåˆ›å»ºæ–°è´¦æˆ· |
| `GET` | `/me` | è·å–å½“å‰ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ |
| `PUT` | `/me` | æ›´æ–°ç”¨æˆ·ä¸ªäººä¿¡æ¯ |
| `POST` | `/refresh-token` | åˆ·æ–°è¿‡æœŸçš„è®¿é—®ä»¤ç‰Œ |

</details>

<details>
<summary><b>ğŸ¯ æ™ºèƒ½åŒ¹é… API</b></summary>

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| `GET` | `/match/students` | åŸºäºæŠ€èƒ½å’Œå…´è¶£åŒ¹é…ç›¸ä¼¼å­¦ç”Ÿ |
| `GET` | `/match/projects` | æ¨èé€‚åˆçš„é¡¹ç›®æœºä¼š |
| `GET` | `/match/courses` | ä¸ªæ€§åŒ–è¯¾ç¨‹æ¨è |
| `POST` | `/match/custom` | è‡ªå®šä¹‰åŒ¹é…æ¡ä»¶æŸ¥è¯¢ |
| `GET` | `/match/similar-users/{user_id}` | æŸ¥æ‰¾ç›¸ä¼¼ç”¨æˆ· |

</details>

<details>
<summary><b>ğŸ“š çŸ¥è¯†ç®¡ç† API</b></summary>

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| `GET` | `/knowledge-bases` | è·å–æ‰€æœ‰çŸ¥è¯†åº“åˆ—è¡¨ |
| `POST` | `/knowledge-bases` | åˆ›å»ºæ–°çš„çŸ¥è¯†åº“ |
| `GET` | `/knowledge-bases/{id}/articles` | è·å–çŸ¥è¯†åº“ä¸‹çš„æ–‡ç«  |
| `POST` | `/knowledge-bases/{id}/articles` | åœ¨çŸ¥è¯†åº“ä¸­åˆ›å»ºæ–‡ç«  |
| `POST` | `/documents/upload` | ä¸Šä¼ å¹¶æ™ºèƒ½è§£ææ–‡æ¡£ |
| `GET` | `/documents/{id}/chunks` | è·å–æ–‡æ¡£åˆ†å—å†…å®¹ |
| `POST` | `/knowledge/search` | è¯­ä¹‰æœç´¢çŸ¥è¯†å†…å®¹ |
| `GET` | `/knowledge/similar/{article_id}` | æŸ¥æ‰¾ç›¸ä¼¼æ–‡ç«  |

</details>

<details>
<summary><b>ğŸ’¬ å®æ—¶é€šä¿¡ API</b></summary>

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| `WebSocket` | `/ws/chat/{room_id}` | å®æ—¶èŠå¤©WebSocketè¿æ¥ |
| `GET` | `/chat-rooms` | è·å–ç”¨æˆ·çš„èŠå¤©å®¤åˆ—è¡¨ |
| `POST` | `/chat-rooms` | åˆ›å»ºæ–°çš„èŠå¤©å®¤ |
| `POST` | `/chat-rooms/{id}/join` | ç”³è¯·åŠ å…¥èŠå¤©å®¤ |
| `GET` | `/chat-rooms/{id}/messages` | è·å–èŠå¤©å†å²æ¶ˆæ¯ |
| `POST` | `/chat-rooms/{id}/upload` | ä¸Šä¼ èŠå¤©æ–‡ä»¶ |
| `PUT` | `/chat-rooms/{id}/settings` | æ›´æ–°èŠå¤©å®¤è®¾ç½® |

</details>

<details>
<summary><b>ğŸ“ è¯¾ç¨‹ç®¡ç† API</b></summary>

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| `GET` | `/courses` | è·å–è¯¾ç¨‹åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µå’Œç­›é€‰ |
| `POST` | `/courses` | åˆ›å»ºæ–°è¯¾ç¨‹ |
| `GET` | `/courses/{id}` | è·å–è¯¾ç¨‹è¯¦ç»†ä¿¡æ¯ |
| `POST` | `/courses/{id}/enroll` | æŠ¥åå‚åŠ è¯¾ç¨‹ |
| `GET` | `/courses/{id}/materials` | è·å–è¯¾ç¨‹å­¦ä¹ èµ„æ–™ |
| `POST` | `/courses/{id}/materials` | ä¸Šä¼ è¯¾ç¨‹èµ„æ–™ |
| `POST` | `/courses/{id}/progress` | æ›´æ–°å­¦ä¹ è¿›åº¦ |
| `GET` | `/courses/{id}/students` | è·å–è¯¾ç¨‹å­¦å‘˜åˆ—è¡¨ |

</details>

<details>
<summary><b>ğŸš€ é¡¹ç›®åä½œ API</b></summary>

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| `GET` | `/projects` | è·å–é¡¹ç›®åˆ—è¡¨ |
| `POST` | `/projects` | åˆ›å»ºæ–°é¡¹ç›® |
| `GET` | `/projects/{id}` | è·å–é¡¹ç›®è¯¦æƒ… |
| `POST` | `/projects/{id}/apply` | ç”³è¯·åŠ å…¥é¡¹ç›®å›¢é˜Ÿ |
| `GET` | `/projects/{id}/members` | è·å–é¡¹ç›®æˆå‘˜åˆ—è¡¨ |
| `POST` | `/projects/{id}/members` | æ·»åŠ é¡¹ç›®æˆå‘˜ |
| `POST` | `/projects/{id}/files` | ä¸Šä¼ é¡¹ç›®æ–‡ä»¶ |
| `GET` | `/projects/{id}/applications` | ç®¡ç†é¡¹ç›®ç”³è¯· |

</details>

<details>
<summary><b>ğŸŒ ç¤¾åŒºè®ºå› API</b></summary>

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| `GET` | `/forum/topics` | è·å–è®ºå›è¯é¢˜åˆ—è¡¨ |
| `POST` | `/forum/topics` | å‘å¸ƒæ–°è¯é¢˜ |
| `GET` | `/forum/topics/{id}` | è·å–è¯é¢˜è¯¦ç»†å†…å®¹ |
| `POST` | `/forum/topics/{id}/comments` | å‘è¡¨è¯é¢˜è¯„è®º |
| `POST` | `/forum/topics/{id}/like` | ç‚¹èµ/å–æ¶ˆç‚¹èµè¯é¢˜ |
| `GET` | `/forum/comments/{id}/replies` | è·å–è¯„è®ºçš„å›å¤åˆ—è¡¨ |
| `POST` | `/forum/comments/{id}/reply` | å›å¤è¯„è®º |

</details>

<details>
<summary><b>ğŸ¤– AIæœåŠ¡ API</b></summary>

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| `POST` | `/ai/chat` | AIå¯¹è¯æ¥å£ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ |
| `GET` | `/ai/conversations` | è·å–AIå¯¹è¯å†å² |
| `POST` | `/ai/conversations/{id}/continue` | ç»§ç»­æŒ‡å®šå¯¹è¯ |
| `POST` | `/ai/tts` | æ–‡æœ¬è½¬è¯­éŸ³æœåŠ¡ |
| `POST` | `/ai/search` | AIå¢å¼ºçš„æ™ºèƒ½æœç´¢ |
| `GET` | `/ai/models` | è·å–å¯ç”¨çš„AIæ¨¡å‹åˆ—è¡¨ |
| `POST` | `/ai/embeddings` | ç”Ÿæˆæ–‡æœ¬å‘é‡åµŒå…¥ |

</details>


## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
Cosbrain/                                    # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ ğŸ“„ README.md                             # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ ğŸ“‹ requirements.txt                      # Pythonä¾èµ–åŒ…åˆ—è¡¨(60ä¸ªåŒ…)
â”œâ”€â”€ ğŸ“œ LICENSE                               # è‡ªå®šä¹‰å¼€æºè®¸å¯è¯
â”œâ”€â”€ ğŸ”§ alembic/                             # æ•°æ®åº“è¿ç§»å·¥å…·
â”‚   â””â”€â”€ env.py                              # Alembicç¯å¢ƒé…ç½®
â””â”€â”€ ğŸš€ project/                             # ä¸»è¦ä»£ç ç›®å½•
    â”œâ”€â”€ ğŸ¯ main.py                          # FastAPIåº”ç”¨å…¥å£(12,824è¡Œ)
    â”œâ”€â”€ ğŸ—„ï¸ models.py                        # SQLAlchemyæ•°æ®æ¨¡å‹(29ä¸ªè¡¨)
    â”œâ”€â”€ ğŸ“‹ schemas.py                       # Pydanticæ•°æ®éªŒè¯æ¨¡å¼
    â”œâ”€â”€ ğŸ”Œ database.py                      # æ•°æ®åº“è¿æ¥å’Œä¼šè¯ç®¡ç†
    â”œâ”€â”€ âš™ï¸ dependencies.py                  # FastAPIä¾èµ–æ³¨å…¥é…ç½®
    â”œâ”€â”€ ğŸ§  ai_core.py                       # AIåŠŸèƒ½æ ¸å¿ƒæ¨¡å—
    â”œâ”€â”€ â˜ï¸ oss_utils.py                     # å¯¹è±¡å­˜å‚¨æœåŠ¡å·¥å…·
    â”œâ”€â”€ ğŸ“¥ import_data.py                   # æ•°æ®å¯¼å…¥å’Œåˆå§‹åŒ–è„šæœ¬
    â”œâ”€â”€ ğŸ”„ reset_sequences.py               # æ•°æ®åº“åºåˆ—é‡ç½®å·¥å…·
    â”œâ”€â”€ ğŸ”§ fix_data_serialization.py        # æ•°æ®åºåˆ—åŒ–ä¿®å¤å·¥å…·
    â”œâ”€â”€ ğŸ“‚ data/                            # æ•°æ®æ–‡ä»¶ç›®å½•
    â”‚   â”œâ”€â”€ projects.csv                    # é¡¹ç›®ç¤ºä¾‹æ•°æ®
    â”‚   â”œâ”€â”€ students.csv                    # å­¦ç”Ÿç¤ºä¾‹æ•°æ®

```


### ğŸ—ƒï¸ æ•°æ®æ–‡ä»¶

å¹³å°åŒ…å«å®Œæ•´çš„ç¤ºä¾‹æ•°æ®å’Œå¯¼å‡ºåŠŸèƒ½ï¼š
- **ğŸ“ˆ ä¸šåŠ¡æ•°æ®**: 34ä¸ªè¡¨çš„å®Œæ•´æ•°æ®å¯¼å‡º
- **ğŸ“‹ è¡¨ç»“æ„**: æ¯ä¸ªè¡¨çš„schemaæ–‡æ¡£
- **ğŸ§ª æµ‹è¯•æ•°æ®**: projects.csvå’Œstudents.csvç­‰ç¤ºä¾‹æ•°æ®
- **ğŸ”„ è¿ç§»è„šæœ¬**: æ•°æ®åº“ç‰ˆæœ¬å‡çº§çš„SQLè„šæœ¬

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ğŸ”§ ç¯å¢ƒè¦æ±‚

<table>
<tr>
<td width="50%">

**ğŸ–¥ï¸ ç³»ç»Ÿè¦æ±‚**
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, Ubuntu 18.04+, macOS 10.15+
- **Pythonç‰ˆæœ¬**: 3.8+ (æ¨è 3.11+)
- **å†…å­˜**: è‡³å°‘ 4GB RAM (æ¨è 8GB+)
- **å­˜å‚¨**: 5GB+ å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

</td>
<td width="50%">

**ğŸ—„ï¸ æ•°æ®åº“è¦æ±‚**
- **PostgreSQL**: 14+ ç‰ˆæœ¬
- **pgvectoræ‰©å±•**: 0.2+ ç‰ˆæœ¬
- **æ•°æ®åº“æƒé™**: åˆ›å»ºæ•°æ®åº“å’Œæ‰©å±•çš„æƒé™
- **è¿æ¥æ•°**: å»ºè®®é…ç½®100+è¿æ¥æ•°

</td>
</tr>
</table>

### ğŸš€ å®‰è£…éƒ¨ç½²

#### 1ï¸âƒ£ å…‹éš†é¡¹ç›®

```bash
# å…‹éš†ä»£ç ä»“åº“
git clone https://github.com/w2902171175/Cosbrain.git
cd Cosbrain

# æŸ¥çœ‹é¡¹ç›®ç»“æ„
ls -la
```

#### 2ï¸âƒ£ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

<details>
<summary><b>Windows (PowerShell)</b></summary>

```powershell
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
.\venv\Scripts\Activate.ps1

# éªŒè¯ç¯å¢ƒ
python --version
pip --version
```

</details>

<details>
<summary><b>Linux/macOS (Bash)</b></summary>

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# éªŒè¯ç¯å¢ƒ
python --version
pip --version
```

</details>

#### 3ï¸âƒ£ å®‰è£…ä¾èµ–

```bash
# å‡çº§pipåˆ°æœ€æ–°ç‰ˆæœ¬
pip install --upgrade pip

# å®‰è£…é¡¹ç›®ä¾èµ–(60ä¸ªåŒ…)
pip install -r requirements.txt

# éªŒè¯å…³é”®åŒ…å®‰è£…
python -c "import fastapi, sqlalchemy, pgvector, torch; print('âœ… æ ¸å¿ƒä¾èµ–å®‰è£…æˆåŠŸ')"
```

#### 4ï¸âƒ£ æ•°æ®åº“é…ç½®

<details>
<summary><b>ğŸ˜ PostgreSQLå®‰è£…ä¸é…ç½®</b></summary>

**Ubuntu/Debian:**
```bash
# å®‰è£…PostgreSQLå’Œpgvector
sudo apt update
sudo apt install postgresql postgresql-contrib
sudo apt install postgresql-14-pgvector

# å¯åŠ¨æœåŠ¡
sudo systemctl start postgresql
sudo systemctl enable postgresql
```

**Windows:**
```powershell
# ä½¿ç”¨Chocolateyå®‰è£…
choco install postgresql
# æˆ–ä¸‹è½½å®˜æ–¹å®‰è£…åŒ…: https://www.postgresql.org/download/windows/
```

**åˆ›å»ºæ•°æ®åº“å’Œæ‰©å±•:**
```sql
-- ä»¥postgresç”¨æˆ·è¿æ¥
sudo -u postgres psql

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE hongqing_platform;

-- åˆ›å»ºç”¨æˆ·
CREATE USER hongqing_user WITH PASSWORD 'your_secure_password';

-- æˆæƒ
GRANT ALL PRIVILEGES ON DATABASE hongqing_platform TO hongqing_user;

-- è¿æ¥åˆ°é¡¹ç›®æ•°æ®åº“
\c hongqing_platform;

-- å®‰è£…pgvectoræ‰©å±•
CREATE EXTENSION IF NOT EXISTS vector;

-- éªŒè¯æ‰©å±•
SELECT * FROM pg_extension WHERE extname = 'vector';
```

</details>

#### 5ï¸âƒ£ ç¯å¢ƒé…ç½®

åˆ›å»º `.env` é…ç½®æ–‡ä»¶ï¼š

```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®
cp .env.example .env
# æˆ–æ‰‹åŠ¨åˆ›å»º
touch .env
```

**å®Œæ•´é…ç½®ç¤ºä¾‹:**

```env
# ==================== æ•°æ®åº“é…ç½® ====================
DATABASE_URL=postgresql://hongqing_user:your_secure_password@localhost:5432/hongqing_platform

# ==================== å®‰å…¨é…ç½® ====================
SECRET_KEY=your-super-secret-key-change-in-production-min-32-chars
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==================== AIæœåŠ¡é…ç½® ====================
# OpenAI GPTæœåŠ¡ (å¯é€‰)
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-3.5-turbo

# å…¶ä»–AIæœåŠ¡ (å¯é€‰)
ANTHROPIC_API_KEY=your-anthropic-key
GOOGLE_API_KEY=your-google-api-key

# ==================== å¯¹è±¡å­˜å‚¨é…ç½® ====================
# S3å…¼å®¹å­˜å‚¨ (å¯é€‰)
S3_ACCESS_KEY_ID=your-access-key-id
S3_SECRET_ACCESS_KEY=your-secret-access-key
S3_ENDPOINT_URL=https://your-s3-endpoint.com
S3_BUCKET_NAME=hongqing-platform-files
S3_BASE_URL=https://your-cdn-domain.com
S3_REGION=us-east-1

# ==================== æ–‡ä»¶ä¸Šä¼ é…ç½® ====================
UPLOAD_DIR=./project/uploaded_files
TEMP_AUDIO_DIR=./project/temp_audio
MAX_FILE_SIZE=10485760          # 10MB
ALLOWED_EXTENSIONS=.pdf,.docx,.xlsx,.pptx,.txt,.md

# ==================== å¼€å‘é…ç½® ====================
DEBUG=true
LOG_LEVEL=INFO
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
ENABLE_DOCS=true
```

#### 6ï¸âƒ£ åˆå§‹åŒ–æ•°æ®åº“

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd project

# åˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„
python -c "
from database import init_db
print('ğŸ”„ æ­£åœ¨åˆå§‹åŒ–æ•°æ®åº“...')
init_db()
print('âœ… æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ')
"

# æ£€æŸ¥è¡¨æ˜¯å¦åˆ›å»ºæˆåŠŸ
python -c "
from database import SessionLocal
from sqlalchemy import text
with SessionLocal() as db:
    result = db.execute(text('SELECT count(*) FROM information_schema.tables WHERE table_schema = \\'public\\''))
    count = result.scalar()
    print(f'âœ… æˆåŠŸåˆ›å»º {count} ä¸ªæ•°æ®è¡¨')
"
```


####  7ï¸âƒ£å¯åŠ¨æœåŠ¡

<details>
<summary><b>ğŸƒâ€â™‚ï¸ å¼€å‘æ¨¡å¼å¯åŠ¨</b></summary>

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd project

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000

# æˆ–ä½¿ç”¨è¯¦ç»†æ—¥å¿—æ¨¡å¼
python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000 --log-level debug
```

</details>

<details>
<summary><b>ğŸš€ ç”Ÿäº§æ¨¡å¼å¯åŠ¨</b></summary>

```bash
# å®‰è£…ç”Ÿäº§æœåŠ¡å™¨
pip install gunicorn

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
gunicorn project.main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000
```

</details>

#### 8ï¸âƒ£ éªŒè¯éƒ¨ç½²

æœåŠ¡å¯åŠ¨åï¼Œè®¿é—®ä»¥ä¸‹åœ°å€éªŒè¯éƒ¨ç½²ï¼š

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| **ğŸ  ä¸»é¡µ** | http://localhost:8000/ | APIæ ¹è·¯å¾„å’ŒçŠ¶æ€æ£€æŸ¥ |
| **ğŸ“š APIæ–‡æ¡£** | http://localhost:8000/docs | Swagger UIäº¤äº’å¼æ–‡æ¡£ |
| **ğŸ“– ReDocæ–‡æ¡£** | http://localhost:8000/redoc | ReDocé£æ ¼çš„APIæ–‡æ¡£ |
| **ğŸ”Œ å¥åº·æ£€æŸ¥** | http://localhost:8000/health | æœåŠ¡å¥åº·çŠ¶æ€ç›‘æ§ |

**âœ… æˆåŠŸæ ‡å¿—:**
- APIæ–‡æ¡£æ­£å¸¸æ˜¾ç¤º
- æ•°æ®åº“è¿æ¥æˆåŠŸ
- 29ä¸ªæ•°æ®è¡¨æ­£ç¡®åˆ›å»º
- AIæ¨¡å‹åŠ è½½æ— é”™è¯¯ï¼ˆå¦‚æœé…ç½®äº†AIæœåŠ¡ï¼‰


## ğŸš€ ç”Ÿäº§éƒ¨ç½²

### ğŸ³ Docker éƒ¨ç½² (æ¨è)

Dockeréƒ¨ç½²æ˜¯æœ€ç®€å•ã€æœ€å¯é çš„ç”Ÿäº§éƒ¨ç½²æ–¹å¼ï¼Œæä¾›äº†ç¯å¢ƒéš”ç¦»å’Œä¸€è‡´æ€§ä¿è¯ã€‚

#### ğŸ“‹ åˆ›å»º Dockerfile

```dockerfile
FROM python:3.11-slim

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    build-essential \
    curl \
    postgresql-client \
    && rm -rf /var/lib/apt/lists/*

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .

# å®‰è£…Pythonä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# åˆ›å»ºå¿…è¦çš„ç›®å½•
RUN mkdir -p project/uploaded_files project/temp_audio

# è®¾ç½®æƒé™
RUN chmod -R 755 project/

# æš´éœ²ç«¯å£
EXPOSE 8000

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=30s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:8000/health || exit 1

# å¯åŠ¨å‘½ä»¤
CMD ["gunicorn", "project.main:app", "-w", "4", "-k", "uvicorn.workers.UvicornWorker", "--bind", "0.0.0.0:8000"]
```

#### ğŸ“ åˆ›å»º Docker Compose æ–‡ä»¶

<details>
<summary><b>å®Œæ•´çš„ docker-compose.yml</b></summary>

```yaml
version: '3.8'

services:
  # åº”ç”¨æœåŠ¡
  app:
    build: 
      context: .
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql://hongqing_user:${DB_PASSWORD}@db:5432/hongqing_platform
      - SECRET_KEY=${SECRET_KEY}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - S3_ACCESS_KEY_ID=${S3_ACCESS_KEY_ID}
      - S3_SECRET_ACCESS_KEY=${S3_SECRET_ACCESS_KEY}
      - DEBUG=false
      - LOG_LEVEL=INFO
    depends_on:
      db:
        condition: service_healthy
    volumes:
      - uploaded_files:/app/project/uploaded_files
      - temp_audio:/app/project/temp_audio
      - ./logs:/app/logs
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  # æ•°æ®åº“æœåŠ¡
  db:
    image: pgvector/pgvector:pg15
    environment:
      POSTGRES_DB: hongqing_platform
      POSTGRES_USER: hongqing_user
      POSTGRES_PASSWORD: ${DB_PASSWORD}
      POSTGRES_INITDB_ARGS: "--encoding=UTF8 --lc-collate=C --lc-ctype=C"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./init-scripts:/docker-entrypoint-initdb.d
    ports:
      - "5432:5432"
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U hongqing_user -d hongqing_platform"]
      interval: 10s
      timeout: 5s
      retries: 5

  # Redisç¼“å­˜ (å¯é€‰)
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 3s
      retries: 3

  # Nginxåå‘ä»£ç†
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./ssl:/etc/nginx/ssl:ro
      - static_files:/var/www/static
    depends_on:
      - app
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
  uploaded_files:
  temp_audio:
  static_files:
```

</details>

#### ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env.production` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“å¯†ç 
DB_PASSWORD=your_super_secure_database_password_here

# åº”ç”¨å¯†é’¥
SECRET_KEY=your-production-secret-key-32-chars-minimum

# AIæœåŠ¡
OPENAI_API_KEY=sk-your-production-openai-key

# å¯¹è±¡å­˜å‚¨
S3_ACCESS_KEY_ID=your-production-s3-access-key
S3_SECRET_ACCESS_KEY=your-production-s3-secret-key
S3_BUCKET_NAME=hongqing-platform-prod
S3_ENDPOINT_URL=https://your-s3-endpoint.com

# å…¶ä»–ç”Ÿäº§é…ç½®
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
```

#### ğŸš€ å¯åŠ¨éƒ¨ç½²

```bash
# 1. å…‹éš†ä»£ç åˆ°ç”Ÿäº§æœåŠ¡å™¨
git clone https://github.com/w2902171175/Cosbrain.git
cd Cosbrain

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.production .env

# 3. æ„å»ºå¹¶å¯åŠ¨æœåŠ¡
docker-compose up -d --build

# 4. æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps
docker-compose logs app

# 5. åˆå§‹åŒ–æ•°æ®åº“ï¼ˆé¦–æ¬¡éƒ¨ç½²ï¼‰
docker-compose exec app python -c "from project.database import init_db; init_db()"

# 6. éªŒè¯éƒ¨ç½²
curl http://localhost:8000/health
```

### ğŸ–¥ï¸ ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²

é€‚ç”¨äºéœ€è¦æ›´ç²¾ç»†æ§åˆ¶çš„ç”Ÿäº§ç¯å¢ƒã€‚

#### 1ï¸âƒ£ ç³»ç»Ÿå‡†å¤‡

```bash
# Ubuntu/Debian æœåŠ¡å™¨å‡†å¤‡
sudo apt update && sudo apt upgrade -y

# å®‰è£…å¿…è¦è½¯ä»¶
sudo apt install -y python3.11 python3.11-venv python3-pip \
                    postgresql-15 postgresql-contrib \
                    nginx supervisor git curl

# å®‰è£…pgvectoræ‰©å±•
sudo apt install -y postgresql-15-pgvector
```

#### 2ï¸âƒ£ åº”ç”¨éƒ¨ç½²

```bash
# 1. åˆ›å»ºåº”ç”¨ç”¨æˆ·
sudo adduser --system --group hongqing
sudo mkdir -p /opt/hongqing
sudo chown hongqing:hongqing /opt/hongqing

# 2. åˆ‡æ¢åˆ°åº”ç”¨ç”¨æˆ·
sudo -u hongqing -i

# 3. éƒ¨ç½²ä»£ç 
cd /opt/hongqing
git clone https://github.com/w2902171175/Cosbrain.git app
cd app

# 4. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3.11 -m venv venv
source venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt

# 5. å®‰è£…ç”Ÿäº§æœåŠ¡å™¨
pip install gunicorn

# 6. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.production
# ç¼–è¾‘ .env.production æ–‡ä»¶

# 7. åˆå§‹åŒ–æ•°æ®åº“
cd project
python -c "from database import init_db; init_db()"
```

#### 3ï¸âƒ£ Gunicorn é…ç½®

åˆ›å»º `gunicorn_config.py`ï¼š

```python
# Gunicorn ç”Ÿäº§é…ç½®
bind = "127.0.0.1:8000"
workers = 4
worker_class = "uvicorn.workers.UvicornWorker"
worker_connections = 1000
max_requests = 1000
max_requests_jitter = 100
timeout = 60
keepalive = 2
preload_app = True

# æ—¥å¿—é…ç½®
accesslog = "/var/log/hongqing/access.log"
errorlog = "/var/log/hongqing/error.log"
loglevel = "info"
access_log_format = '%(h)s %(l)s %(u)s %(t)s "%(r)s" %(s)s %(b)s "%(f)s" "%(a)s" %(D)s'

# è¿›ç¨‹é…ç½®
user = "hongqing"
group = "hongqing"
tmp_upload_dir = "/tmp"

# å®‰å…¨é…ç½®
limit_request_line = 4096
limit_request_fields = 100
limit_request_field_size = 8190
```

#### 4ï¸âƒ£ Supervisor è¿›ç¨‹ç®¡ç†

åˆ›å»º `/etc/supervisor/conf.d/hongqing.conf`ï¼š

```ini
[program:hongqing]
command=/opt/hongqing/app/venv/bin/gunicorn project.main:app -c gunicorn_config.py
directory=/opt/hongqing/app
user=hongqing
group=hongqing
autostart=true
autorestart=true
startsecs=10
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/hongqing/app.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
environment=PATH="/opt/hongqing/app/venv/bin"
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
# åˆ›å»ºæ—¥å¿—ç›®å½•
sudo mkdir -p /var/log/hongqing
sudo chown hongqing:hongqing /var/log/hongqing

# å¯åŠ¨Supervisor
sudo supervisorctl reread
sudo supervisorctl update
sudo supervisorctl start hongqing

# æ£€æŸ¥çŠ¶æ€
sudo supervisorctl status hongqing
```

#### 5ï¸âƒ£ Nginx åå‘ä»£ç†

åˆ›å»º `/etc/nginx/sites-available/hongqing`ï¼š

<details>
<summary><b>å®Œæ•´ Nginx é…ç½®</b></summary>

```nginx
# upstreamé…ç½®
upstream hongqing_app {
    server 127.0.0.1:8000 fail_timeout=0;
}

# HTTP to HTTPSé‡å®šå‘
server {
    listen 80;
    server_name yourdomain.com www.yourdomain.com;
    return 301 https://$server_name$request_uri;
}

# HTTPSä¸»é…ç½®
server {
    listen 443 ssl http2;
    server_name yourdomain.com www.yourdomain.com;

    # SSLè¯ä¹¦é…ç½®
    ssl_certificate /path/to/your/cert.pem;
    ssl_certificate_key /path/to/your/private.key;
    ssl_session_timeout 1d;
    ssl_session_cache shared:SSL:50m;
    ssl_session_tickets off;

    # ç°ä»£SSLé…ç½®
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;

    # å®‰å…¨å¤´
    add_header Strict-Transport-Security "max-age=63072000" always;
    add_header X-Frame-Options DENY always;
    add_header X-Content-Type-Options nosniff always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "strict-origin-when-cross-origin" always;

    # æ—¥å¿—é…ç½®
    access_log /var/log/nginx/hongqing_access.log;
    error_log /var/log/nginx/hongqing_error.log;

    # å®¢æˆ·ç«¯é…ç½®
    client_max_body_size 50M;
    client_body_timeout 60s;
    client_header_timeout 60s;

    # Gzipå‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;

    # é™æ€æ–‡ä»¶
    location /static/ {
        alias /opt/hongqing/app/static/;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # ä¸Šä¼ æ–‡ä»¶
    location /uploads/ {
        alias /opt/hongqing/app/project/uploaded_files/;
        expires 1M;
        add_header Cache-Control "public";
    }

    # WebSocketè¿æ¥
    location /ws/ {
        proxy_pass http://hongqing_app;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 86400;
    }

    # APIæ¥å£
    location / {
        proxy_pass http://hongqing_app;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_redirect off;
        proxy_read_timeout 300s;
        proxy_connect_timeout 75s;
    }

    # å¥åº·æ£€æŸ¥
    location /health {
        access_log off;
        proxy_pass http://hongqing_app;
    }
}
```

</details>

å¯ç”¨é…ç½®ï¼š

```bash
# å¯ç”¨ç«™ç‚¹
sudo ln -s /etc/nginx/sites-available/hongqing /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡è½½Nginx
sudo systemctl reload nginx
```

### ğŸ“Š ç”Ÿäº§ç›‘æ§

#### ğŸ” æ—¥å¿—ç›‘æ§

```bash
# å®æ—¶æŸ¥çœ‹åº”ç”¨æ—¥å¿—
sudo tail -f /var/log/hongqing/app.log

# æŸ¥çœ‹Nginxè®¿é—®æ—¥å¿—
sudo tail -f /var/log/nginx/hongqing_access.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo tail -f /var/log/hongqing/error.log
```

#### ğŸ“ˆ æ€§èƒ½ç›‘æ§

ä½¿ç”¨Prometheus + Grafanaè¿›è¡Œç›‘æ§ï¼š

```yaml
# prometheus.yml é…ç½®ç‰‡æ®µ
scrape_configs:
  - job_name: 'hongqing-platform'
    static_configs:
      - targets: ['localhost:8000']
    metrics_path: '/metrics'
    scrape_interval: 15s
```

#### ğŸš¨ å¥åº·æ£€æŸ¥

```bash
# åˆ›å»ºå¥åº·æ£€æŸ¥è„šæœ¬
cat > /opt/hongqing/health_check.sh << 'EOF'
#!/bin/bash
response=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:8000/health)
if [ $response -eq 200 ]; then
    echo "âœ… Service is healthy"
    exit 0
else
    echo "âŒ Service is unhealthy (HTTP $response)"
    exit 1
fi
EOF

chmod +x /opt/hongqing/health_check.sh

# æ·»åŠ åˆ°crontabè¿›è¡Œå®šæœŸæ£€æŸ¥
echo "*/5 * * * * /opt/hongqing/health_check.sh" | sudo crontab -
```

## ğŸ§ª å¼€å‘ä¸æµ‹è¯•

### ï¿½ æµ‹è¯•æ¡†æ¶

å¹³å°é‡‡ç”¨pytestä½œä¸ºä¸»è¦æµ‹è¯•æ¡†æ¶ï¼Œæä¾›å®Œæ•´çš„å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•æ”¯æŒã€‚

#### ğŸ“ å®‰è£…æµ‹è¯•ä¾èµ–

```bash
# å®‰è£…æµ‹è¯•ç›¸å…³åŒ…
pip install pytest pytest-asyncio pytest-cov pytest-mock httpx

# å®‰è£…ä»£ç è´¨é‡å·¥å…·
pip install black isort mypy flake8
```

#### ğŸ§ª è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
pytest tests/test_auth.py
pytest tests/test_ai_core.py

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=project tests/ --cov-report=html

# å¹¶è¡Œè¿è¡Œæµ‹è¯•ï¼ˆæ›´å¿«ï¼‰
pytest -n auto

# è¯¦ç»†è¾“å‡ºæ¨¡å¼
pytest -v -s
```

#### ğŸ“Š æµ‹è¯•è¦†ç›–ç‡

```bash
# ç”Ÿæˆè¯¦ç»†è¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=project --cov-report=html --cov-report=term-missing

# æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š
open htmlcov/index.html  # macOS
start htmlcov/index.html  # Windows
```

### ğŸ”„ æ•°æ®åº“è¿ç§»

#### Alembic è¿ç§»ç®¡ç†

```bash
# ç”Ÿæˆæ–°çš„è¿ç§»æ–‡ä»¶
alembic revision --autogenerate -m "Add new feature"

# åº”ç”¨è¿ç§»
alembic upgrade head

# å›æ»šè¿ç§»
alembic downgrade -1

# æŸ¥çœ‹è¿ç§»å†å²
alembic history

# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
alembic current
```

#### è‡ªå®šä¹‰è¿ç§»è„šæœ¬

```python
# migrations/add_vector_indexes.py
"""æ·»åŠ å‘é‡ç´¢å¼•ä¼˜åŒ–"""
from alembic import op
import sqlalchemy as sa

def upgrade():
    # ä¸ºå‘é‡å­—æ®µåˆ›å»ºHNSWç´¢å¼•
    op.execute("""
        CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_knowledge_chunks_embedding_hnsw 
        ON knowledge_document_chunks 
        USING hnsw (embedding vector_cosine_ops)
        WITH (m = 16, ef_construction = 64);
    """)
    
    # ä¸ºæ–‡æœ¬æœç´¢åˆ›å»ºGINç´¢å¼•
    op.execute("""
        CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_knowledge_chunks_content_gin 
        ON knowledge_document_chunks 
        USING gin (to_tsvector('english', content));
    """)

def downgrade():
    op.drop_index('idx_knowledge_chunks_embedding_hnsw')
    op.drop_index('idx_knowledge_chunks_content_gin')
```

## ğŸ› æ•…éšœæ’é™¤

### ğŸ” å¸¸è§é—®é¢˜è¯Šæ–­

#### ğŸ—„ï¸ æ•°æ®åº“ç›¸å…³é—®é¢˜

<details>
<summary><b>âŒ æ•°æ®åº“è¿æ¥å¤±è´¥</b></summary>

**é—®é¢˜ç—‡çŠ¶:**
- `connection to server at "localhost" (127.0.0.1), port 5432 failed`
- `FATAL: database "hongqing_platform" does not exist`

**è§£å†³æ–¹æ¡ˆ:**
```bash
# 1. æ£€æŸ¥PostgreSQLæœåŠ¡çŠ¶æ€
sudo systemctl status postgresql
sudo systemctl start postgresql  # å¦‚æœæœªå¯åŠ¨

# 2. éªŒè¯æ•°æ®åº“å’Œç”¨æˆ·
sudo -u postgres psql
\l  # åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“
\du  # åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·

# 3. åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
CREATE DATABASE hongqing_platform;
CREATE USER hongqing_user WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE hongqing_platform TO hongqing_user;

# 4. éªŒè¯pgvectoræ‰©å±•
\c hongqing_platform;
CREATE EXTENSION IF NOT EXISTS vector;
SELECT * FROM pg_extension WHERE extname = 'vector';
```

</details>

<details>
<summary><b>âŒ pgvectoræ‰©å±•é—®é¢˜</b></summary>

**é—®é¢˜ç—‡çŠ¶:**
- `extension "vector" does not exist`
- `could not access file "$libdir/vector"`

**è§£å†³æ–¹æ¡ˆ:**
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install postgresql-15-pgvector

# CentOS/RHEL
sudo yum install pgvector

# ä»æºç ç¼–è¯‘å®‰è£…
git clone https://github.com/pgvector/pgvector.git
cd pgvector
make
sudo make install
```

</details>

#### ğŸ“¦ ä¾èµ–å®‰è£…é—®é¢˜

<details>
<summary><b>âŒ PythonåŒ…å®‰è£…å¤±è´¥</b></summary>

**é—®é¢˜ç—‡çŠ¶:**
- `ERROR: Failed building wheel for XXX`
- `Microsoft Visual C++ 14.0 is required` (Windows)

**è§£å†³æ–¹æ¡ˆ:**
```bash
# 1. å‡çº§pipå’Œsetuptools
pip install --upgrade pip setuptools wheel

# 2. æ¸…ç†ç¼“å­˜
pip cache purge

# 3. ä½¿ç”¨é¢„ç¼–è¯‘åŒ…
pip install --only-binary=all -r requirements.txt

# 4. Windowsç‰¹å®šé—®é¢˜
# å®‰è£…Microsoft C++ Build Tools
# æˆ–å®‰è£…Visual Studio Community

# 5. macOSç‰¹å®šé—®é¢˜
xcode-select --install  # å®‰è£…Xcodeå‘½ä»¤è¡Œå·¥å…·
```

</details>

<details>
<summary><b>âŒ PyTorchå®‰è£…é—®é¢˜</b></summary>

**é—®é¢˜ç—‡çŠ¶:**
- PyTorchå®‰è£…ç¼“æ…¢æˆ–å¤±è´¥
- CUDAç‰ˆæœ¬ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ:**
```bash
# CPUç‰ˆæœ¬ï¼ˆæ¨èç”¨äºå¼€å‘ï¼‰
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu

# GPUç‰ˆæœ¬ï¼ˆéœ€è¦CUDAï¼‰
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118

# éªŒè¯å®‰è£…
python -c "import torch; print(torch.__version__); print(torch.cuda.is_available())"
```

</details>

#### ğŸ“ æ–‡ä»¶æ“ä½œé—®é¢˜

<details>
<summary><b>âŒ æ–‡ä»¶ä¸Šä¼ å¤±è´¥</b></summary>

**é—®é¢˜ç—‡çŠ¶:**
- `Permission denied`
- `No such file or directory`
- `File size exceeds limit`

**è§£å†³æ–¹æ¡ˆ:**
```bash
# 1. åˆ›å»ºå¿…è¦ç›®å½•
mkdir -p project/uploaded_files project/temp_audio

# 2. è®¾ç½®æ­£ç¡®æƒé™
chmod 755 project/uploaded_files project/temp_audio
chown $(whoami):$(whoami) project/uploaded_files project/temp_audio

# 3. æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h .

# 4. è°ƒæ•´æ–‡ä»¶å¤§å°é™åˆ¶
# åœ¨.envä¸­è®¾ç½®
MAX_FILE_SIZE=52428800  # 50MB

# 5. æ£€æŸ¥Nginxé…ç½®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
# client_max_body_size 50M;
```

</details>

#### ğŸ¤– AIåŠŸèƒ½é—®é¢˜

<details>
<summary><b>âŒ OpenAI APIè°ƒç”¨å¤±è´¥</b></summary>

**é—®é¢˜ç—‡çŠ¶:**
- `Invalid API key`
- `Rate limit exceeded`
- `Connection timeout`

**è§£å†³æ–¹æ¡ˆ:**
```bash
# 1. éªŒè¯APIå¯†é’¥
export OPENAI_API_KEY="sk-your-api-key"
curl -H "Authorization: Bearer $OPENAI_API_KEY" \
     https://api.openai.com/v1/models

# 2. æ£€æŸ¥ç½‘ç»œè¿æ¥
ping api.openai.com
nslookup api.openai.com

# 3. é…ç½®ä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
export HTTP_PROXY=http://proxy.example.com:8080
export HTTPS_PROXY=http://proxy.example.com:8080

# 4. ä½¿ç”¨APIä»£ç†æœåŠ¡
OPENAI_API_BASE=https://your-proxy-service.com/v1
```

</details>

<details>
<summary><b>âŒ å‘é‡æœç´¢æ€§èƒ½é—®é¢˜</b></summary>

**é—®é¢˜ç—‡çŠ¶:**
- æœç´¢é€Ÿåº¦æ…¢
- å†…å­˜å ç”¨é«˜

**è§£å†³æ–¹æ¡ˆ:**
```sql
-- 1. åˆ›å»ºå‘é‡ç´¢å¼•
CREATE INDEX CONCURRENTLY idx_embeddings_hnsw 
ON knowledge_document_chunks 
USING hnsw (embedding vector_cosine_ops)
WITH (m = 16, ef_construction = 64);

-- 2. è°ƒæ•´PostgreSQLé…ç½®
-- shared_buffers = 1GB
-- effective_cache_size = 3GB
-- random_page_cost = 1.1

-- 3. ä¼˜åŒ–æŸ¥è¯¢
-- ä½¿ç”¨é€‚å½“çš„ef_searchå‚æ•°
SET hnsw.ef_search = 100;
```

</details>

### ğŸ”§ è°ƒè¯•å·¥å…·

#### ğŸ“Š æ€§èƒ½ç›‘æ§

```python
# æ·»åŠ åˆ°main.pyä¸­
import time
from fastapi import Request
import logging

@app.middleware("http")
async def log_requests(request: Request, call_next):
    start_time = time.time()
    response = await call_next(request)
    process_time = time.time() - start_time
    
    logger.info(
        f"{request.method} {request.url.path} "
        f"took {process_time:.4f}s "
        f"status={response.status_code}"
    )
    return response
```

#### ğŸ” æ—¥å¿—è°ƒè¯•

<details>
<summary><b>å¯ç”¨è¯¦ç»†æ—¥å¿—</b></summary>

```bash
# 1. ç¯å¢ƒå˜é‡é…ç½®
export LOG_LEVEL=DEBUG
export PYTHONPATH=$PWD/project

# 2. å¯åŠ¨æ—¶å¯ç”¨è¯¦ç»†æ—¥å¿—
python -m uvicorn project.main:app \
    --reload \
    --log-level debug \
    --access-log

# 3. æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/app.log
tail -f logs/error.log

# 4. è¿‡æ»¤ç‰¹å®šæ¨¡å—æ—¥å¿—
export PYTHONASYNCIODEBUG=1  # å¼‚æ­¥è°ƒè¯•
```

</details>

#### ğŸ©º å¥åº·æ£€æŸ¥

åˆ›å»ºå¥åº·æ£€æŸ¥ç«¯ç‚¹ `/health`ï¼š

```python
@app.get("/health")
async def health_check():
    """ç³»ç»Ÿå¥åº·æ£€æŸ¥"""
    try:
        # æ£€æŸ¥æ•°æ®åº“è¿æ¥
        db = next(get_db())
        db.execute(text("SELECT 1"))
        db_status = "healthy"
    except Exception as e:
        db_status = f"unhealthy: {str(e)}"
    
    # æ£€æŸ¥AIæœåŠ¡
    ai_status = "healthy" if ai_core.check_models() else "unhealthy"
    
    return {
        "status": "healthy" if db_status == "healthy" and ai_status == "healthy" else "unhealthy",
        "database": db_status,
        "ai_services": ai_status,
        "timestamp": datetime.utcnow().isoformat()
    }
```

### ğŸ”§ å¼€å‘ç¯å¢ƒé‡ç½®

å¦‚æœé‡åˆ°ä¸¥é‡é—®é¢˜ï¼Œå¯ä»¥é‡ç½®å¼€å‘ç¯å¢ƒï¼š

```bash
#!/bin/bash
# scripts/reset_dev_env.sh

echo "ğŸ”„ é‡ç½®å¼€å‘ç¯å¢ƒ..."

# 1. åœæ­¢æ‰€æœ‰æœåŠ¡
pkill -f uvicorn
pkill -f gunicorn

# 2. æ¸…ç†Pythonç¼“å­˜
find . -type d -name "__pycache__" -exec rm -rf {} +
find . -type f -name "*.pyc" -delete

# 3. é‡å»ºè™šæ‹Ÿç¯å¢ƒ
deactivate || true
rm -rf venv
python3.11 -m venv venv
source venv/bin/activate

# 4. é‡æ–°å®‰è£…ä¾èµ–
pip install --upgrade pip
pip install -r requirements.txt

# 5. é‡ç½®æ•°æ®åº“
cd project
python -c "
from database import engine, init_db
from sqlalchemy import text
with engine.begin() as conn:
    conn.execute(text('DROP SCHEMA public CASCADE'))
    conn.execute(text('CREATE SCHEMA public'))
    conn.execute(text('CREATE EXTENSION IF NOT EXISTS vector'))
init_db()
print('âœ… æ•°æ®åº“é‡ç½®å®Œæˆ')
"

# 6. æ¸…ç†ä¸Šä¼ æ–‡ä»¶
rm -rf project/uploaded_files/*
rm -rf project/temp_audio/*

echo "âœ… å¼€å‘ç¯å¢ƒé‡ç½®å®Œæˆ"
```

### ğŸ“ è·å–å¸®åŠ©

å¦‚æœé—®é¢˜ä»æ— æ³•è§£å†³ï¼š

1. **æ£€æŸ¥æ—¥å¿—**: æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯æ—¥å¿—ä¿¡æ¯
2. **æœç´¢Issues**: åœ¨GitHub Issuesä¸­æœç´¢ç±»ä¼¼é—®é¢˜
3. **æäº¤Issue**: æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œç¯å¢ƒé…ç½®
4. **ç¤¾åŒºè®¨è®º**: åœ¨GitHub Discussionsä¸­å¯»æ±‚å¸®åŠ©
5. **è”ç³»å¼€å‘è€…**: å‘é€é‚®ä»¶è‡³ wxh1331@foxmail.com

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬çƒ­çƒˆæ¬¢è¿ç¤¾åŒºçš„è´¡çŒ®ï¼æ— è®ºæ˜¯æŠ¥å‘Šbugã€æå‡ºæ–°åŠŸèƒ½å»ºè®®ã€æ”¹è¿›æ–‡æ¡£è¿˜æ˜¯æäº¤ä»£ç ï¼Œæ¯ä¸€ä»½è´¡çŒ®éƒ½è®©è¿™ä¸ªé¡¹ç›®å˜å¾—æ›´å¥½ã€‚

### ğŸ¯ ç‰¹æ®Šè´¡çŒ®æœºä¼š

#### ğŸŒŸ ä¼˜å…ˆçº§é«˜çš„è´¡çŒ®

- **æ€§èƒ½ä¼˜åŒ–**: æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ã€ç®—æ³•æ”¹è¿›
- **AIåŠŸèƒ½å¢å¼º**: æ–°çš„æ¨¡å‹é›†æˆã€ç®—æ³•ä¼˜åŒ–
- **å›½é™…åŒ–**: å¤šè¯­è¨€æ”¯æŒå’Œæœ¬åœ°åŒ–
- **ç§»åŠ¨ç«¯é€‚é…**: å“åº”å¼è®¾è®¡æ”¹è¿›
- **æ–‡æ¡£å®Œå–„**: APIæ–‡æ¡£ã€ä½¿ç”¨æŒ‡å—

#### ğŸ¨ è®¾è®¡è´¡çŒ®

- **UI/UXè®¾è®¡**: ç•Œé¢è®¾è®¡ç¨¿å’Œç”¨æˆ·ä½“éªŒæ”¹è¿›
- **Logoè®¾è®¡**: é¡¹ç›®æ ‡è¯†å’Œå“ç‰Œè®¾è®¡
- **åŠ¨ç”»æ•ˆæœ**: äº¤äº’åŠ¨ç”»å’Œè§†è§‰æ•ˆæœ

#### ğŸ“š æ–‡æ¡£è´¡çŒ®

- **æ•™ç¨‹ç¼–å†™**: å…¥é—¨æŒ‡å—ã€é«˜çº§æ•™ç¨‹
- **APIæ–‡æ¡£**: æ¥å£è¯´æ˜å’Œç¤ºä¾‹ä»£ç 
- **æœ€ä½³å®è·µ**: ä½¿ç”¨æŠ€å·§å’Œç»éªŒåˆ†äº«

### â“ è·å–å¸®åŠ©

å¦‚æœæ‚¨åœ¨è´¡çŒ®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ–‡æ¡£**: å…ˆæŸ¥é˜…ç°æœ‰æ–‡æ¡£å’ŒFAQ
2. **æœç´¢Issues**: æŸ¥æ‰¾æ˜¯å¦æœ‰ç±»ä¼¼é—®é¢˜
3. **æé—®è®¨è®º**: åœ¨GitHub Discussionsä¸­æé—®
4. **è”ç³»ç»´æŠ¤è€…**: å‘é€é‚®ä»¶è‡³ wxh1331@foxmail.com

---

**å†æ¬¡æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼** ğŸ™ æ¯ä¸€ä»½è´¡çŒ®éƒ½è®©è¿™ä¸ªé¡¹ç›®å˜å¾—æ›´å¥½ï¼Œä¹Ÿè®©æ•´ä¸ªç¤¾åŒºå—ç›Šã€‚


#### ğŸ“ˆ æ€§èƒ½åŸºå‡†

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å½“å‰å€¼ | ä¼˜åŒ–å»ºè®® |
|------|--------|--------|----------|
| **APIå“åº”æ—¶é—´** | < 200ms | 150ms | âœ… è¾¾æ ‡ |
| **å¹¶å‘ç”¨æˆ·æ•°** | 1000+ | 800 | éœ€è¦ä¼˜åŒ– |
| **æ•°æ®åº“æŸ¥è¯¢** | < 50ms | 30ms | âœ… è¾¾æ ‡ |
| **AIæ¨ç†æ—¶é—´** | < 2s | 1.5s | âœ… è¾¾æ ‡ |
| **å†…å­˜ä½¿ç”¨ç‡** | < 80% | 65% | âœ… è¾¾æ ‡ |
| **CPUä½¿ç”¨ç‡** | < 70% | 45% | âœ… è¾¾æ ‡ |

### ğŸ”® æœªæ¥æ‰©å±•è®¡åˆ’

1. **å®¹å™¨åŒ–éƒ¨ç½²**: å®Œæ•´çš„Kuberneteséƒ¨ç½²æ–¹æ¡ˆ
2. **è¾¹ç¼˜è®¡ç®—**: AIæ¨¡å‹è¾¹ç¼˜éƒ¨ç½²ï¼Œé™ä½å»¶è¿Ÿ
3. **å®æ—¶æ•°æ®**: WebRTCæ”¯æŒï¼Œå®ç°å®æ—¶éŸ³è§†é¢‘é€šè¯
4. **æ™ºèƒ½æ¨è**: åŸºäºç”¨æˆ·è¡Œä¸ºçš„æ·±åº¦å­¦ä¹ æ¨èç³»ç»Ÿ
5. **å¤šäº‘éƒ¨ç½²**: æ”¯æŒAWSã€Azureã€é˜¿é‡Œäº‘ç­‰å¤šäº‘ç¯å¢ƒ

## ï¿½ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨è‡ªå®šä¹‰å¼€æºè®¸å¯è¯ï¼Œæ”¯æŒä¸ªäººå’Œæ•™è‚²ç”¨é€”ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

### ğŸ“œ è®¸å¯è¯æ‘˜è¦

- âœ… **å…è´¹ä½¿ç”¨**: ä¸ªäººã€æ•™è‚²æœºæ„å’Œéè¥åˆ©ç»„ç»‡å¯å…è´¹ä½¿ç”¨
- âœ… **å¼€æºé€æ˜**: æºä»£ç å®Œå…¨å¼€æ”¾ï¼Œæ”¯æŒå­¦ä¹ å’Œç ”ç©¶
- âœ… **ä¿®æ”¹æƒé™**: å…è®¸ä¿®æ”¹å’Œå®šåˆ¶ä»¥æ»¡è¶³ç‰¹å®šéœ€æ±‚
- âœ… **åˆ†å‘æƒé™**: å¯ä»¥åˆ†å‘åŸå§‹æˆ–ä¿®æ”¹ç‰ˆæœ¬ï¼ˆéœ€ä¿æŒå¼€æºï¼‰
- âŒ **å•†ä¸šé™åˆ¶**: ç¦æ­¢ç›´æ¥å•†ä¸šé”€å”®æˆ–é›†æˆåˆ°å•†ä¸šäº§å“
- âŒ **é—­æºç¦æ­¢**: ä»»ä½•è¡ç”Ÿä½œå“å¿…é¡»ä¿æŒå¼€æº

### ğŸ¤ å•†ä¸šåˆä½œ

å¦‚éœ€å•†ä¸šä½¿ç”¨æˆ–å®šåˆ¶å¼€å‘æœåŠ¡ï¼Œè¯·è”ç³»ï¼š
- ğŸ“§ **é‚®ç®±**: wxh1331@foxmail.com
- ğŸ’¼ **å•†åŠ¡åˆä½œ**: æä¾›ä¼ä¸šçº§éƒ¨ç½²ã€å®šåˆ¶å¼€å‘ã€æŠ€æœ¯æ”¯æŒç­‰æœåŠ¡

## ğŸ“ è”ç³»æˆ‘ä»¬

<div align="center">

### ğŸŒ é¡¹ç›®é“¾æ¥

[![GitHub](https://img.shields.io/badge/GitHub-Cosbrain-181717?style=for-the-badge&logo=github)](https://github.com/w2902171175/Cosbrain)
[![Issues](https://img.shields.io/badge/Issues-é—®é¢˜åé¦ˆ-red?style=for-the-badge&logo=github)](https://github.com/w2902171175/Cosbrain/issues)
[![Discussions](https://img.shields.io/badge/Discussions-è®¨è®ºäº¤æµ-blue?style=for-the-badge&logo=github)](https://github.com/w2902171175/Cosbrain/discussions)

### ğŸ“¬ è”ç³»æ–¹å¼

| è”ç³»æ–¹å¼ | åœ°å€/è´¦å· | ç”¨é€” |
|----------|-----------|------|
| ğŸ“§ **é‚®ç®±** | wxh1331@foxmail.com | æŠ€æœ¯æ”¯æŒã€å•†åŠ¡åˆä½œã€é—®é¢˜åé¦ˆ |
| ğŸ› **BugæŠ¥å‘Š** | [GitHub Issues](https://github.com/w2902171175/Cosbrain/issues) | æäº¤bugã€åŠŸèƒ½è¯·æ±‚ |
| ğŸ’¬ **ç¤¾åŒºè®¨è®º** | [GitHub Discussions](https://github.com/w2902171175/Cosbrain/discussions) | æŠ€æœ¯äº¤æµã€ä½¿ç”¨é—®é¢˜ |
| ğŸ“š **æ–‡æ¡£é—®é¢˜** | [æ–‡æ¡£Issues](https://github.com/w2902171175/Cosbrain/issues?q=label%3Adocumentation) | æ–‡æ¡£æ”¹è¿›å»ºè®® |

</div>

### ğŸ¤ ç¤¾åŒºæ”¯æŒ

- **ğŸ” é—®é¢˜åé¦ˆ**: å‘ç°bugæˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œè¯·åœ¨GitHub Issuesä¸­æäº¤
- **ğŸ’¡ åŠŸèƒ½å»ºè®®**: æœ‰æ–°çš„åŠŸèƒ½æƒ³æ³•ï¼Œæ¬¢è¿åœ¨Discussionsä¸­åˆ†äº«
- **ğŸ¤ æŠ€æœ¯äº¤æµ**: åŠ å…¥æˆ‘ä»¬çš„æŠ€æœ¯è®¨è®ºï¼Œåˆ†äº«ä½¿ç”¨ç»éªŒ
- **ğŸ“– æ–‡æ¡£è´¡çŒ®**: å¸®åŠ©æ”¹è¿›æ–‡æ¡£ï¼Œè®©æ›´å¤šäººèƒ½å¤Ÿè½»æ¾ä½¿ç”¨å¹³å°

### ğŸ“‹ å¸¸è§é—®é¢˜

<details>
<summary><b>â“ å¦‚ä½•å¿«é€Ÿå¼€å§‹ä½¿ç”¨ï¼Ÿ</b></summary>

1. æŸ¥çœ‹[å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)éƒ¨åˆ†
2. ç¡®ä¿æ»¡è¶³ç¯å¢ƒè¦æ±‚
3. æŒ‰æ­¥éª¤å®‰è£…éƒ¨ç½²
4. è®¿é—®APIæ–‡æ¡£è¿›è¡Œæµ‹è¯•

</details>

<details>
<summary><b>â“ éƒ¨ç½²é‡åˆ°é—®é¢˜æ€ä¹ˆåŠï¼Ÿ</b></summary>

1. é¦–å…ˆæŸ¥çœ‹[æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)éƒ¨åˆ†
2. æ£€æŸ¥æ—¥å¿—æ–‡ä»¶å®šä½å…·ä½“é”™è¯¯
3. åœ¨GitHub Issuesä¸­æœç´¢ç±»ä¼¼é—®é¢˜
4. å¦‚æœä»æ— æ³•è§£å†³ï¼Œè¯·æäº¤æ–°çš„Issue

</details>

<details>
<summary><b>â“ å¦‚ä½•è´¡çŒ®ä»£ç ï¼Ÿ</b></summary>

1. é˜…è¯»[è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
2. Forké¡¹ç›®åˆ°æ‚¨çš„GitHub
3. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯è¿›è¡Œå¼€å‘
4. æäº¤Pull Request

</details>

<details>
<summary><b>â“ å•†ä¸šä½¿ç”¨å¦‚ä½•æˆæƒï¼Ÿ</b></summary>

- å½“å‰è®¸å¯è¯ç¦æ­¢ç›´æ¥å•†ä¸šä½¿ç”¨
- å¦‚éœ€å•†ä¸šæˆæƒï¼Œè¯·å‘é‚®ä»¶è‡³ wxh1331@foxmail.com
- æˆ‘ä»¬æä¾›ä¼ä¸šçº§å®šåˆ¶æœåŠ¡å’ŒæŠ€æœ¯æ”¯æŒ

</details>

### ğŸ‘¥ ç‰¹åˆ«æ„Ÿè°¢

- **æ•™è‚²å·¥ä½œè€…**: ä¸ºå¹³å°åŠŸèƒ½è®¾è®¡æä¾›å®è´µå»ºè®®
- **å¼€å‘è€…ç¤¾åŒº**: åœ¨æŠ€æœ¯é€‰å‹å’Œæ¶æ„è®¾è®¡ä¸­ç»™äºˆçš„å¸®åŠ©
- **æ—©æœŸç”¨æˆ·**: æµ‹è¯•å’Œåé¦ˆï¼Œå¸®åŠ©æ”¹è¿›ç”¨æˆ·ä½“éªŒ
- **å¼€æºè´¡çŒ®è€…**: æ¯ä¸€ä¸ªPull Requestå’ŒIssueéƒ½è®©é¡¹ç›®å˜å¾—æ›´å¥½

### ğŸ« å­¦æœ¯æ”¯æŒ

æ„Ÿè°¢ç›¸å…³é™¢æ ¡å’Œç ”ç©¶æœºæ„åœ¨ä»¥ä¸‹æ–¹é¢çš„æ”¯æŒï¼š
- ç®—æ³•ç ”ç©¶å’Œä¼˜åŒ–å»ºè®®
- ç”¨æˆ·ä½“éªŒå’Œç•Œé¢è®¾è®¡æŒ‡å¯¼
- æ•™è‚²åœºæ™¯çš„éœ€æ±‚åˆ†æ
- æŠ€æœ¯éªŒè¯å’Œæµ‹è¯•æ”¯æŒ

---

<div align="center">

## â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼

[![GitHub stars](https://img.shields.io/github/stars/w2902171175/Cosbrain?style=social)](https://github.com/w2902171175/Cosbrain/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/w2902171175/Cosbrain?style=social)](https://github.com/w2902171175/Cosbrain/network/members)
[![GitHub watchers](https://img.shields.io/github/watchers/w2902171175/Cosbrain?style=social)](https://github.com/w2902171175/Cosbrain/watchers)

### ğŸš€ è®©æˆ‘ä»¬ä¸€èµ·æ‰“é€ æ›´æ™ºèƒ½çš„æ•™è‚²åä½œå¹³å°ï¼

**ğŸ“± å…³æ³¨é¡¹ç›®åŠ¨æ€** â€¢ **ğŸ¤ å‚ä¸ç¤¾åŒºè®¨è®º** â€¢ **ğŸ’¡ åˆ†äº«ä½¿ç”¨å¿ƒå¾—** â€¢ **ğŸ”§ è´¡çŒ®ä»£ç æ”¹è¿›**

---

*Made with â¤ï¸ by the Cosbrain Team*

*Â© 2025 é¸¿åº†ä¹¦äº‘åˆ›æ–°åä½œå¹³å°. All rights reserved.*

</div>
